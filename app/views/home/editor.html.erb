<%= javascript_include_tag "editor" %>
<script type="text/javascript">
function create() {  
  var url = "/rename/";
  url += <%= params[:sketchID] %> + "/"
  url += $("#newTxt").val();
  //redirect browser to url for creating sketches
  f = document.forms["renameForm"];
  f.action = url;
  f.onsubmit = null;
  f.submit();
}
</script>
<% id = Integer(params[:sketchID]) %>
<% data = getSketch(id) %>
<% if data == nil %>
  <script type="text/javascript">
  //stop window from continuing to load, redirecting anyway
  window.stop();
  //redirect to root url
  window.location = "/";
  </script>
<% else %>
<script type="text/javascript">
localStorage["data"] = '<%= data.html_safe %>';
</script>
<div class="toolbox">
  <button id="clearBtn">Clear Canvas</button>
  <select id="controlBox">
    <option value="window">Window</option>
    <option value="phone">Phone</option>
    <option value="rectangle">Rectangle</option>
    <option value="rounded-rectangle">Rounded Rectangle</option>
    <option value="elipse">Elipse</option>
    <option value="button">Button</option>
    <option value="checkbox">Checkbox</option>
    <option value="radio">Radio Button</option>
    <option value="label">Label</option>
    <option value="paragraph">Paragraph</option>
    <option value="textbox">Text Box</option>
    <option value="textarea">Text Area</option>
    <option value="progress">Progress Bar</option>
    <option value="link">Link</option>
    <option value="menu">Menu Bar</option>
    <option value="note">Sticky Note</option>
  </select>
  <button id="addBtn">Add</button>
  <button id="undoBtn">Undo</button>
  <button id="redoBtn">Redo</button>
  <span style="font-size:large;border-style:solid"><%= sketchName(id) %></span>
  <button id="renameBtn">Rename</button>
  <span id="saved" style="color:green;display:none">Saved</span>
  <!-- rename dialog -->
  <div id="renameDialog">
    <div id="nullErrors" style="display:none;color:red">Please enter a name</div>
    <div id="validationErrors" style="display:none;color:red">Only letters, numbers, hyphens and underscores are allowed</div>
    <form id="renameForm" onsubmit="return validateRename()">
      <input id="newTxt" type="text" value="<%= sketchName(id) %>" />
      <input type="submit" value="Rename" />
    </form>
  </div>
</div>
<div class="canvas" id="canvas">
  <iframe class="canvasFrame" src="/canvas.html" name="canvasFrame">
  </iframe>
</div>
<% end %>
